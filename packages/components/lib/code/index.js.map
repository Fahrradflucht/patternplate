{"version":3,"sources":["../../patterns/code/index.js"],"names":["React","require","styled","default","includes","low","toh","css","less","scss","stylus","js","ts","json","xml","md","bash","module","exports","Code","highlight","toElements","props","source","highlightCode","language","children","code","className","block","themes","dark","mono1","mono2","mono3","hue1","hue2","hue3","hue4","hue5","hue52","hue6","hue62","light","themed","theme","name","key","StyledCode","hast","registerLanguage","languages","value","Array","isArray","root","createElement","type","tagName"],"mappings":"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","file":"index.js","sourcesContent":["const React = require('react');\nconst styled = require('styled-components').default;\nconst {includes} = require('lodash');\nconst low = require('lowlight/lib/core');\nconst toh = require('hast-to-hyperscript');\n\n// Highlight.js modules\nconst css = require('highlight.js/lib/languages/css.js');\nconst less = require('highlight.js/lib/languages/less.js');\nconst scss = require('highlight.js/lib/languages/scss.js');\nconst stylus = require('highlight.js/lib/languages/stylus.js');\n\nconst js = require('highlight.js/lib/languages/javascript.js');\nconst ts = require('highlight.js/lib/languages/typescript.js');\nconst json = require('highlight.js/lib/languages/json.js');\n\nconst xml = require('highlight.js/lib/languages/xml.js');\nconst md = require('highlight.js/lib/languages/markdown.js');\n\nconst bash = require('highlight.js/lib/languages/bash.js');\n\nmodule.exports = Code;\nmodule.exports.highlight = highlight;\nmodule.exports.toElements = toElements;\n\nfunction Code(props) {\n  const source = highlightCode(props.language, props.children);\n\n  const code = <StyledCode className={props.className}>{source}</StyledCode>;\n\n  return props.block ? <pre>{code}</pre> : code;\n}\n\nconst themes = {\n  dark: {\n    mono1: '#abb2bf',\n    mono2: '#818896',\n    mono3: '#5c6370',\n    hue1: '#56b6c2',\n    hue2: '#61aeee',\n    hue3: '#c678dd',\n    hue4: '#98c379',\n    hue5: '#e06c75',\n    hue52: '#be5046',\n    hue6: '#d19a66',\n    hue62: '#e6c07b'\n  },\n  light: {\n    mono1: '#383a42',\n    mono2: '#686b77',\n    mono3: '#a0a1a7',\n    hue1: '#0184bb',\n    hue2: '#4078f2',\n    hue3: '#a626a4',\n    hue4: '#50a14f',\n    hue5: '#e45649',\n    hue52: '#c91243',\n    hue6: '#986801',\n    hue62: '#c18401'\n  }\n};\n\nconst themed = key => props => themes[props.theme.name][key];\n\nconst StyledCode = styled.code`\n  display: block;\n  overflow-x: auto;\n  padding: 0.5em;\n  color: ${themed('mono1')};\n  font-family: 'SFMono-Regular', Consolas, 'Liberation Mono', Menlo, Courier,\n    monospace;\n\n  .hljs-comment,\n  .hljs-quote {\n    color: ${themed('mono3')};\n    font-style: italic;\n  }\n\n  .hljs-doctag,\n  .hljs-keyword,\n  .hljs-formula {\n    color: ${themed('hue3')};\n  }\n\n  .hljs-section,\n  .hljs-name,\n  .hljs-selector-tag,\n  .hljs-deletion,\n  .hljs-subst {\n    color: ${themed('hue5')};\n  }\n\n  .hljs-literal {\n    color: ${themed('hue1')};\n  }\n\n  .hljs-string,\n  .hljs-regexp,\n  .hljs-addition,\n  .hljs-attribute,\n  .hljs-meta-string {\n    color: ${themed('hue4')};\n  }\n\n  .hljs-built_in,\n  .hljs-class .hljs-title {\n    color: ${themed('hue62')};\n  }\n\n  .hljs-attr,\n  .hljs-variable,\n  .hljs-template-variable,\n  .hljs-type,\n  .hljs-selector-class,\n  .hljs-selector-attr,\n  .hljs-selector-pseudo,\n  .hljs-number {\n    color: ${themed('hue6')};\n  }\n\n  .hljs-symbol,\n  .hljs-bullet,\n  .hljs-link,\n  .hljs-meta,\n  .hljs-selector-id,\n  .hljs-title {\n    color: ${themed('hue2')};\n  }\n\n  .hljs-emphasis {\n    font-style: italic;\n  }\n\n  .hljs-strong {\n    font-weight: bold;\n  }\n\n  .hljs-link {\n    text-decoration: underline;\n  }\n`;\n\nfunction highlightCode(language, source = '') {\n  if (!language) {\n    return source;\n  }\n  if (!source) {\n    return source;\n  }\n  const hast = highlight(language, source);\n  return toElements(hast);\n}\n\n// Highlight configuration\n\n// CSS and friends\nlow.registerLanguage('css', css);\nlow.registerLanguage('less', less);\nlow.registerLanguage('scss', scss);\nlow.registerLanguage('stylus', stylus);\n\n// JS and friends\nlow.registerLanguage('js', js);\nlow.registerLanguage('javascript', js);\nlow.registerLanguage('jsx', js);\nlow.registerLanguage('ts', ts);\nlow.registerLanguage('tsx', ts);\nlow.registerLanguage('typescript', ts);\nlow.registerLanguage('json', json);\n\n// HTML and friends\nlow.registerLanguage('html', xml);\nlow.registerLanguage('xml', xml);\nlow.registerLanguage('md', md);\nlow.registerLanguage('markdown', md);\n\n// (s)hell(ish)s\nlow.registerLanguage('bash', bash);\n// Low.registerLanguage('shell', bash);\n\nconst languages = [\n  'css',\n  'less',\n  'scss',\n  'stylus',\n  'js',\n  'javascript',\n  'jsx',\n  'ts',\n  'tsx',\n  'typescript',\n  'json',\n  'html',\n  'xml',\n  'md',\n  'markdown',\n  'bash'\n];\n\nfunction highlight(language, source) {\n  if (!includes(languages, language)) {\n    return source;\n  }\n  const {value: children} = low.highlight(language, source);\n  return children;\n}\n\nfunction toElements(children) {\n  if (!Array.isArray(children)) {\n    return children;\n  }\n\n  const root = toh(React.createElement, {\n    type: 'element',\n    tagName: 'div',\n    children\n  });\n\n  return root.props.children;\n}\n"]}