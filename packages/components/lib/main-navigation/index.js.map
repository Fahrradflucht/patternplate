{"version":3,"sources":["../../patterns/main-navigation/index.js"],"names":["React","require","styled","default","NavigationTree","NavigationToolbar","Header","Navigation","args","getRef","bind","handleScrollRequest","e","ref","target","item","getBoundingClientRect","list","pad","getPadding","bottom","scrollTop","offsetTop","height","top","props","children","Children","toArray","toolbar","find","child","type","header","NavigationHeader","handleKeyDown","applicationTitle","active","docs","onItemClick","navigation","Component","module","exports","defaultProps","tools","el","style","global","getComputedStyle","parseInt","getPropertyValue","direction","StyledHeader","StyledNavigation","div","theme","background","PASSAGE_HEIGHT","StyledNavigationTree","StyledNavigationToolbar","Documentation","onScrollRequest","StyledDocumentationTree","border"],"mappings":"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","file":"index.js","sourcesContent":["const React = require('react');\nconst styled = require('styled-components').default;\nconst NavigationTree = require('../navigation-tree');\nconst NavigationToolbar = require('../navigation-toolbar');\nconst Header = require('../main-header');\n\nclass Navigation extends React.Component {\n  constructor(...args) {\n    super(...args);\n    this.getRef = this.getRef.bind(this);\n    this.handleScrollRequest = this.handleScrollRequest.bind(this);\n  }\n\n  handleScrollRequest(e) {\n    if (!this.ref || !e.target) {\n      return;\n    }\n\n    const item = e.target.getBoundingClientRect();\n    const list = this.ref.getBoundingClientRect();\n    const pad = getPadding(this.ref);\n\n    if (item.bottom > list.bottom - pad('bottom')) {\n      this.ref.scrollTop = e.target.offsetTop - list.height + pad('bottom') + item.height;\n    }\n\n    if (item.top < list.top + pad('top')) {\n      this.ref.scrollTop = e.target.offsetTop + pad('top');\n    }\n  }\n\n  getRef(ref) {\n    this.ref = ref;\n  }\n\n  render() {\n    const {props} = this;\n    const children = React.Children.toArray(props.children);\n    const toolbar = children.find(child => child.type === NavigationToolbar);\n    const header = children.find(child => child.type === NavigationHeader);\n\n    return (\n      <StyledNavigation onKeyDown={this.handleKeyDown}>\n        <StyledNavigationTree innerRef={this.getRef}>\n          {header\n            ? header\n            : <StyledHeader\n                title={props.applicationTitle}\n                symbol=\"patternplate\"\n                />\n          }\n          <Documentation\n            active={props.active}\n            docs={props.docs}\n            onItemClick={props.onItemClick}\n            onScrollRequest={this.handleScrollRequest}\n          />\n          <NavigationTree\n            active={props.active}\n            data={props.navigation.children}\n            onItemClick={props.onItemClick}\n            onScrollRequest={this.handleScrollRequest}\n            prefix=\"/pattern\"\n          />\n        </StyledNavigationTree>\n        {toolbar &&\n          <StyledNavigationToolbar>\n            {toolbar}\n          </StyledNavigationToolbar>\n        }\n      </StyledNavigation>\n    );\n  }\n}\n\nmodule.exports = Navigation;\nmodule.exports.NavigationToolbar = NavigationToolbar;\nmodule.exports.NavigationHeader = NavigationHeader;\n\nNavigation.defaultProps = {\n  tools: []\n};\n\nfunction NavigationHeader(props) {\n  return <div>{props.children}</div>\n}\n\nfunction getPadding(el) {\n  const style = global.getComputedStyle(el, null);\n  return direction => parseInt(\n    style.getPropertyValue(`padding-${direction}`),\n    10\n  );\n}\n\nconst StyledHeader = styled(Header) `\n  box-sizing: border-box;\n  margin-bottom: 10px;\n`;\n\nconst StyledNavigation = styled.div`\n  display: flex;\n  height: 100%;\n  flex-direction: column;\n  justify-content: space-between;\n  position: relative;\n  background-color: ${props => props.theme.background}\n`;\n\nconst PASSAGE_HEIGHT = 50;\n\nconst StyledNavigationTree = styled.div`\n  flex-grow: 1;\n  flex-shrink: 1;\n  padding-bottom: 50px;\n  overflow-x: hidden;\n  overflow-y: scroll;\n  -webkit-overflow-scroll: touch;\n  mask-image: linear-gradient(\n    to top,\n    rgba(0,0,0,0),\n    rgba(0,0,0,1) ${PASSAGE_HEIGHT}px\n  );\n  -webkit-mask-image: linear-gradient(\n    to top,\n    rgba(0,0,0,0),\n    rgba(0,0,0,1) ${PASSAGE_HEIGHT}px\n  );\n`;\n\nconst StyledNavigationToolbar = styled.div`\n  flex-grow: 0;\n  flex-shrink: 0;\n`;\n\nfunction Documentation(props) {\n  return (\n    <StyledDocumentationTree\n      active={props.active}\n      className=\"docs-navigation\"\n      data={props.docs.children}\n      onItemClick={props.onItemClick}\n      onScrollRequest={props.onScrollRequest}\n      prefix=\"/doc\"\n    />\n  );\n}\n\nconst StyledDocumentationTree = styled(NavigationTree) `\n  margin-bottom: 5px;\n  border-bottom: 1px solid ${props => props.theme.border};\n  padding-bottom: 5px;\n`;\n"]}